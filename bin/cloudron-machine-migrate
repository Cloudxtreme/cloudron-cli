#!/usr/bin/env node

'use strict';

require('../src/common.js');

var program = require('commander'),
    actions = require('../src/machine/actions.js');

program.version(require('../package.json').version);

program.description('Migrates a Cloudron using a specific provider [caas,ec2]')
    .arguments('<provider>')
    .option('--ssh-key-file <ssh key file>', 'SSH key filepath')
    .option('--fqdn <domain>', 'Current domain')
    .option('--new-fqdn <new domain>', 'New domain')
    .option('--type <type>', 'Instance type')
    .option('--region <region>', 'Instance region')
    .option('--size <size>', 'Disk size in GB', parseInt)
    .option('--access-key-id <accessKeyId>', 'AWS accessKeyId')
    .option('--secret-access-key <secretAccessKey>', 'AWS secretAccessKey')
    .option('--instance-id <instanceId>', 'EC2 instance id')
    .action(actions.migrate);

if (!process.argv.slice(2).length) {
    program.outputHelp();
}

program.parse(process.argv);
